"use strict";exports.id=390,exports.ids=[390],exports.modules={7357:(e,t,l)=>{l.d(t,{A:()=>r});let r=(0,l(41680).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},18741:(e,t,l)=>{l.d(t,{A:()=>r});let r=(0,l(41680).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},80390:(e,t,l)=>{l.d(t,{r:()=>u});var r=l(45512),a=l(58009),o=l(2754),i=l(39400),s=l(18741),n=l(7357);function c({onZoomIn:e,onZoomOut:t}){return(0,r.jsxs)("div",{className:"absolute bottom-4 right-4 flex flex-col gap-2",children:[(0,r.jsx)(i.$,{variant:"outline",size:"icon",className:"w-8 h-8 bg-black/50 backdrop-blur-sm border-primary/30 hover:bg-primary/20",onClick:e,children:(0,r.jsx)(s.A,{className:"h-4 w-4"})}),(0,r.jsx)(i.$,{variant:"outline",size:"icon",className:"w-8 h-8 bg-black/50 backdrop-blur-sm border-primary/30 hover:bg-primary/20",onClick:t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]})}var d=l(64590);function m({planet:e,mode:t,onClose:l,onSelect:a,position:o}){return(0,r.jsx)("div",{className:"absolute z-50 pointer-events-auto",style:{left:`${o.x}px`,top:`${o.y}px`,transform:"translate(-50%, -100%)"},children:(0,r.jsxs)(d.Zp,{className:"w-80 bg-black/90 backdrop-blur-sm border-primary/30",children:[(0,r.jsx)(d.aR,{className:"pb-2",children:(0,r.jsxs)(d.ZB,{className:"text-lg text-primary flex justify-between items-center",children:[e.name,(0,r.jsxs)("span",{className:"text-xs font-mono text-primary/60",children:["[",e.coordinate_x,", ",e.coordinate_y,"]"]})]})}),(0,r.jsxs)(d.Wu,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Size: "}),(0,r.jsxs)("span",{className:"font-mono",children:[e.size_km.toLocaleString()," km"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Biome: "}),(0,r.jsx)("span",{className:"font-mono capitalize",children:e.biome})]})]}),e.owner_id&&(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Status: "}),(0,r.jsx)("span",{className:"font-mono text-red-400",children:"Colonized"})]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,r.jsx)(i.$,{variant:"outline",size:"sm",onClick:l,className:"flex-1 border-primary/30 hover:bg-primary/20",children:"Close"}),(()=>{switch(t){case"homeworld":return(0,r.jsx)(i.$,{size:"sm",onClick:a,className:"flex-1 bg-primary hover:bg-primary/80",children:"Select Homeworld"});case"mission-target":return(0,r.jsx)(i.$,{size:"sm",onClick:a,className:"flex-1 bg-primary hover:bg-primary/80",children:"Select Target"});default:return null}})()]})]})]})})}let h=(e,t)=>({ocean:`rgba(56, 189, 248, ${t})`,jungle:`rgba(234, 179, 8, ${t})`,desert:`rgba(249, 115, 22, ${t})`,ice:`rgba(34, 211, 238, ${t})`,volcanic:`rgba(239, 68, 68, ${t})`})[e]||`rgba(32, 224, 160, ${t})`,x=e=>3+(e-1e3)/49e3*5;function u({mode:e,onPlanetSelect:t,allowedPlanets:l=[],highlightedPlanets:i=[],initialZoom:s=1,initialCenter:n,width:d="800px",height:u="600px",focusedPlanet:p}){let{state:y}=(0,o.I)(),[g,b]=(0,a.useState)({x:n?.x||0,y:n?.y||0,zoom:s}),[f,v]=(0,a.useState)(null),[k,j]=(0,a.useState)(!1),[w,z]=(0,a.useState)(!1),N=(0,a.useRef)({x:0,y:0,viewportX:0,viewportY:0}),C=(0,a.useRef)(null),S=(0,a.useRef)(null),M=(0,a.useRef)(0);(0,a.useCallback)(e=>{if(e.preventDefault(),e.ctrlKey){let t=C.current;if(!t)return;let l=t.getBoundingClientRect(),r=e.clientX-l.left,a=e.clientY-l.top,o=(r-t.width/2+g.x)/g.zoom,i=(a-t.height/2+g.y)/g.zoom,s=e.deltaY<0?1.1:1/1.1,n=Math.min(Math.max(g.zoom*s,.8*Math.max(t.width/1e4,t.height/1e4)),5),c=r-o*n,d=a-i*n;b(e=>({...e,zoom:n,x:c,y:d}))}else b(t=>({...t,x:t.x-e.deltaX/t.zoom,y:t.y-e.deltaY/t.zoom}))},[g.zoom]);let $=(0,a.useCallback)(e=>{0===e.button&&(z(!0),N.current={x:e.clientX,y:e.clientY,viewportX:g.x,viewportY:g.y})},[g]);(0,a.useCallback)(e=>{if(!w)return;let t=e.clientX-N.current.x,l=e.clientY-N.current.y;b(e=>({...e,x:N.current.viewportX-t/e.zoom,y:N.current.viewportY-l/e.zoom}))},[w]),(0,a.useCallback)(()=>{z(!1)},[]);let _=(0,a.useCallback)((e,t)=>{let l=C.current;return l?{x:(e+5e3)*g.zoom+l.width/2-g.x,y:(t+5e3)*g.zoom+l.height/2-g.y}:{x:0,y:0}},[g]),T=(0,a.useCallback)(()=>{let e=C.current,t=e?.getContext("2d");if(!e||!t)return;e.width=e.clientWidth,e.height=e.clientHeight,t.fillStyle="#000814",t.fillRect(0,0,e.width,e.height);let r=50*g.zoom,a=Math.floor((g.x-e.width/2)/r)*r,o=Math.floor((g.y-e.height/2)/r)*r,s=Math.ceil((g.x+e.width/2)/r)*r,n=Math.ceil((g.y+e.height/2)/r)*r;t.strokeStyle="rgba(32, 224, 160, 0.15)",t.lineWidth=1;for(let l=a;l<=s;l+=r){let r=l-g.x+e.width/2;t.beginPath(),t.moveTo(r,0),t.lineTo(r,e.height),t.stroke()}for(let l=o;l<=n;l+=r){let r=l-g.y+e.height/2;t.beginPath(),t.moveTo(0,r),t.lineTo(e.width,r),t.stroke()}let c=_(0,0);t.strokeStyle="rgba(255, 0, 0, 0.3)",t.lineWidth=2,t.beginPath(),t.moveTo(0,c.y),t.lineTo(e.width,c.y),t.stroke(),t.strokeStyle="rgba(0, 0, 255, 0.3)",t.beginPath(),t.moveTo(c.x,0),t.lineTo(c.x,e.height),t.stroke(),y.planets?.forEach(e=>{let r=_(e.coordinate_x,e.coordinate_y),a=x(e.size_km)*g.zoom,o=t.createRadialGradient(r.x,r.y,a,r.x,r.y,3*a),s=h(e.biome,1);o.addColorStop(0,s.replace("1)","0.3)")),o.addColorStop(1,s.replace("1)","0)")),t.fillStyle=o,t.beginPath(),t.arc(r.x,r.y,3*a,0,2*Math.PI),t.fill();let n=i.includes(e.id),c=!l||l.includes(e.id);t.fillStyle=h(e.biome,c?1:.4),t.beginPath(),t.arc(r.x,r.y,a,0,2*Math.PI),t.fill(),n&&(t.strokeStyle="rgba(32, 224, 160, 0.8)",t.lineWidth=2,t.stroke()),t.font=`${12*g.zoom}px monospace`,t.fillStyle=n?"#20e0a0":"#ffffff",t.textAlign="center",t.fillText(e.name,r.x,r.y-2.5*a)}),M.current=requestAnimationFrame(T)},[y.planets,g,i,l,_]),P=(0,a.useCallback)(e=>{if(w)return;let t=C.current,r=t?.getBoundingClientRect();if(!r||!t)return;let a=e.clientX-r.left,o=e.clientY-r.top,i=y.planets?.find(e=>{let t=_(e.coordinate_x,e.coordinate_y),l=a-t.x,r=o-t.y;return Math.sqrt(l*l+r*r)<20*g.zoom});i&&(!l||l.includes(i.id))&&(v(i),j(!0))},[y.planets,g,l,w,_]),R=(0,a.useMemo)(()=>f?_(f.coordinate_x,f.coordinate_y):{x:0,y:0},[f,_]),Y=(0,a.useCallback)(e=>{let t=C.current;t&&b(l=>{let r=l.zoom*(e?.1:10),a=.8*Math.max(t.width/1e4,t.height/1e4);return{...l,zoom:Math.min(Math.max(r,a),5)}})},[]);return(0,r.jsxs)("div",{ref:S,className:"relative overflow-hidden border border-primary/20 rounded-lg",style:{cursor:w?"grabbing":"grab",width:d,height:u},children:[(0,r.jsx)("canvas",{ref:C,onClick:P,onMouseDown:$,className:"w-full h-full"}),k&&f&&(0,r.jsx)(m,{planet:f,mode:e,onClose:()=>j(!1),onSelect:()=>{t?.(f),j(!1)},viewport:g,position:R}),(0,r.jsx)(c,{onZoomIn:()=>Y(!0),onZoomOut:()=>Y(!1)})]})}}};
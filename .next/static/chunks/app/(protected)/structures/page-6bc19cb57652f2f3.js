(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{1458:(e,t,r)=>{Promise.resolve().then(r.bind(r,9907))},700:(e,t,r)=>{"use strict";let s=r(8726),i=r(4521);function*n(e){let t=1e3;for(;;){let r=e/t;if(r<1)return;yield r,t*=1e3}}t.Ay=function(e,t){var r,a;let c;let o=t?{...s.defaultOptions,...t}:s.defaultOptions;if(!Array.isArray(o.units)||!o.units.length)throw Error("Option `units` must be a non-empty array");try{c=i.parseValue(e)}catch(t){return t instanceof Error&&console.warn(`WARN: ${t.message} (millify)`),String(e)}let l=c<0?"-":"",d=0;for(let e of n(c=Math.abs(c)))c=e,d+=1;if(d>=o.units.length)return e.toString();let u=i.roundTo(c,o.precision);for(let e of n(u))u=e,d+=1;let m=null!==(r=o.units[d])&&void 0!==r?r:"",p=o.lowercase?m.toLowerCase():m,h=o.space?" ":"",x=u.toLocaleString(null!==(a=o.locales)&&void 0!==a?a:i.getLocales(),{minimumFractionDigits:i.getFractionDigits(u)});return`${l}${x}${h}${p}`}},8726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0,t.defaultOptions={lowercase:!1,precision:1,space:!1,units:["","K","M","B","T","P","E"]}},4521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocales=t.getFractionDigits=t.roundTo=t.parseValue=void 0,t.parseValue=function(e){let t=parseFloat(null==e?void 0:e.toString());if(isNaN(t))throw Error("Input value is not a number");if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw RangeError("Input value is outside of safe integer range");return t},t.roundTo=function(e,t){if(!Number.isFinite(e))throw Error("Input value is not a finite number");if(!Number.isInteger(t)||t<0)throw Error("Precision is not a positive integer");return Number.isInteger(e)?e:parseFloat(e.toFixed(t))},t.getFractionDigits=function(e){var t;if(Number.isInteger(e))return 0;let r=e.toString().split(".")[1];return null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0},t.getLocales=function(){var e;return"undefined"==typeof navigator?[]:Array.from(null!==(e=navigator.languages)&&void 0!==e?e:[])}},9907:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(5155),i=r(9113),n=r.n(i),a=r(9318),c=r(9749),o=r(700),l=r(3312);let d=(0,r(7401).A)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var u=r(9351),m=r(4348),p=r(5621),h=r(7655),x=r(3950),g=r(5440),y=r(6056),f=r(4277),v=r(2115),j=r(2110),_=r(5534),N=r(7485),b=r(1567),w=r(1923),M=r(5565),E=r(7404);let C={metal_mine:{type:"metal_mine",name:"Metal Mine",description:"Mines and processes metal ore from planetary deposits. Each level increases metal production.",productionType:"metal",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},energy_plant:{type:"energy_plant",name:"Energy Plant",description:"Generates power to fuel your planetary operations. Each level increases energy output.",productionType:"energy",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},deuterium_synthesizer:{type:"deuterium_synthesizer",name:"Deuterium Synthesizer",description:"Extracts hydrogen and synthesizes deuterium fuel. Each level increases deuterium production.",productionType:"deuterium",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},research_lab:{type:"research_lab",name:"Research Laboratory",description:"Conducts scientific research to unlock new technologies. Each level increases research speed and efficiency.",productionType:"science",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},microchip_factory:{type:"microchip_factory",name:"Microchip Factory",description:"Manufactures advanced microprocessors and circuitry. Each level increases microchip production.",productionType:"microchips",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},shipyard:{type:"shipyard",name:"Shipyard",description:"Builds and maintains your fleet of spacecraft. Each level unlocks new ship types.",productionType:"none",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},defense_factory:{type:"defense_factory",name:"Defense Factory",description:"Manufactures planetary defense systems and weaponry. Each level reduces defense construction time and unlocks new defense types.",productionType:"none",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!1},metal_hangar:{type:"metal_hangar",name:"Metal Hangar",description:"Large-scale storage facility for processed metal. Each level increases metal storage capacity.",productionType:"metal",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!0},deuterium_tank:{type:"deuterium_tank",name:"Deuterium Tank",description:"Pressurized storage facility for deuterium fuel. Each level increases deuterium storage capacity.",productionType:"deuterium",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!0},microchip_vault:{type:"microchip_vault",name:"Microchip Vault",description:"Secure storage facility for sensitive microelectronics. Each level increases microchip storage capacity.",productionType:"microchips",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!0},data_center:{type:"data_center",name:"Data Center",description:"Advanced facility for processing and storing scientific data. Each level increases research data storage and processing speed.",productionType:"science",icon:(0,s.jsx)(d,{className:"h-5 w-5"}),hasStorage:!0}};function S(e){var t;let{info:r,existingStructure:i,config:l}=e,{state:d}=(0,a.I)(),[u,m]=(0,v.useState)(i),{currentResources:p}=(0,a.I)();(0,v.useEffect)(()=>{m(i)},[i,d]);let h=async e=>{await _.F.structures.upgrade(d.selectedPlanet.id,e.id)},x=async e=>{await _.F.structures.construct(d.selectedPlanet.id,e)},g=(e,t)=>{if(!d.structuresConfig||void 0===t&&0===e.level)return 0;let r=p.energy_production/p.energy_consumption;return 3600*(void 0!==t?e.production_rate*(1+(t-e.level)*n().toInteger(l.production.percent_increase_per_level)/100):e.production_rate)*(r>=1?1:r)},y=e=>n().toInteger(l.storage.increase_per_level)*e,f=null!==(t=null==u?void 0:u.level)&&void 0!==t?t:0,j=1+l.cost.percent_increase_per_level*f/100,N={metal:l.cost.resources.metal*j,deuterium:l.cost.resources.deuterium*j,microchips:l.cost.resources.microchips*j,science:l.cost.resources.science*j},b=1+l.time.percent_increase_per_level*f/100,w=Math.min(l.time.base_seconds*b,l.time.max_seconds),C=1+l.energy_consumption.percent_increase_per_level*f/100,S=1+l.energy_consumption.percent_increase_per_level*(f+1)/100,k=l.energy_consumption.base*C,F=l.energy_consumption.base*S,I=p.energy_production/(p.energy_consumption+F-k);return r.hasStorage||(null==u?void 0:u.production_rate)&&0!==u.production_rate||0!==l.production.percent_increase_per_level?(0,s.jsxs)(c.Zp,{className:"bg-card/50 backdrop-blur-sm neon-border hover:shadow-[0_0_20px_rgba(32,224,160,0.3)] transition-all duration-300",children:[(0,s.jsxs)(c.aR,{className:"flex flex-row items-start gap-6 pb-2",children:[(0,s.jsx)("div",{className:"w-2/5 aspect-square",children:(0,s.jsx)(M.default,{src:(0,E.w)("structures",r.type+".webp"),alt:r.name,width:100,height:100,className:"w-full h-full object-cover rounded-lg"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-3/5",children:[(0,s.jsx)(c.ZB,{className:"text-xl font-bold neon-text tracking-wide uppercase hover:scale-105 transition-transform",children:r.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:r.description}),u&&("none"!==r.productionType||r.hasStorage)&&(0,s.jsxs)("div",{className:"text-sm text-primary/70 font-medium",children:["none"!==r.productionType&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:p.energy_production<p.energy_consumption?"text-red-400":"",children:["Production:"," ","energy_plant"===r.type?u.production_rate:Math.floor(g(u))>1e4?(0,o.Ay)(Math.floor(g(u))):Math.floor(g(u)),"energy_plant"===r.type?r.productionType:(0,s.jsx)("span",{className:"text-muted-foreground",children:"/h"})]}),u&&!u.is_under_construction&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,s.jsxs)("span",{className:I<1?"text-red-400":"text-emerald-400",children:["energy_plant"===r.type?u.production_rate*(1+n().toInteger(l.production.percent_increase_per_level)/100):Math.floor(g(u,u.level+1))>1e4?(0,o.Ay)(Math.floor(g(u,u.level+1))):Math.floor(g(u,u.level+1)),"energy_plant"===r.type?r.productionType:(0,s.jsx)("span",{className:"text-muted-foreground",children:"/h"})]})]})]}),r.hasStorage&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["Storage: ",(0,o.Ay)(y(f))]}),!u.is_under_construction&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,s.jsx)("span",{className:"text-emerald-400",children:(0,o.Ay)(y(f+1))})]})]}),0!==k&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-violet-400/70",children:["Energy:"," ",k>1e4?(0,o.Ay)(k):k]}),u&&!u.is_under_construction&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"→"}),(0,s.jsx)("span",{className:"text-violet-400/70",children:F>1e4?(0,o.Ay)(F):F})]})]})]})]})]}),(0,s.jsx)(c.Wu,{className:"space-y-4 pt-4 border-t border-primary/20",children:u?(0,s.jsx)(T,{structure:u,info:r,upgradeCosts:N,constructionTime:w,onUpgrade:h,futureEnergyRatio:I}):(0,s.jsx)(A,{constructionCost:N,constructionTime:w,info:r,onConstruct:x,energyConsumption:k,futureEnergyRatio:I,config:d.structuresConfig.available_structures[r.type]})})]}):null}function T(e){let{structure:t,upgradeCosts:r,constructionTime:i,onUpgrade:n,futureEnergyRatio:c}=e,{currentResources:o}=(0,a.I)(),d=o.metal>=r.metal&&o.deuterium>=r.deuterium&&o.science>=r.science&&o.microchips>=r.microchips;return t.is_under_construction&&t.construction_finish_time&&t.construction_start_time?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-sm text-primary/70",children:"Under Construction"}),(0,s.jsx)(j.M,{startTime:t.construction_start_time,finishTime:t.construction_finish_time,variant:"primary"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-sm text-primary/70",children:["Level ",t.level]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Upgrade Costs:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.metal>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(o.metal<r.metal?"text-red-500":"text-secondary"),children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(r.metal)})]}),r.deuterium>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(o.deuterium<r.deuterium?"text-red-500":"text-primary"),children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(r.deuterium)})]}),r.microchips>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(o.microchips<r.microchips?"text-red-500":"text-accent"),children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(r.microchips)})]}),r.science>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(o.science<r.science?"text-red-500":"text-blue-400"),children:[(0,s.jsx)(h.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(r.science)})]})]})]}),(0,s.jsxs)("div",{className:"text-sm",children:["Construction Time: ",(0,b.m)(i)]}),c<1?(0,s.jsxs)("div",{className:"text-sm text-amber-400",children:["Warning: This upgrade will result in an energy ratio of"," ",c.toFixed(2),", reducing production efficiency"]}):c>o.energy_production/o.energy_consumption&&(0,s.jsxs)("div",{className:"text-sm text-emerald-400",children:["This upgrade will improve energy ratio to"," ",c.toFixed(2),", increasing production efficiency"]}),(0,s.jsx)(l.$,{onClick:()=>n(t),disabled:t.is_under_construction||!d,className:"w-full px-4 py-2 rounded-lg font-medium transition-colors border ".concat(t.is_under_construction||!d?"bg-gray-800/50 text-gray-500 border-gray-700 cursor-not-allowed":"bg-primary/20 hover:bg-primary/30 text-primary border-primary/50 hover:border-primary/80 neon-border"),children:t.is_under_construction?"Under Construction":d?"Upgrade to Level ".concat(t.level+1):"Not Enough Resources"})]})}function A(e){var t,r;let{constructionCost:i,constructionTime:n,info:c,onConstruct:o,energyConsumption:d,futureEnergyRatio:g,config:y}=e,{currentResources:f,state:v}=(0,a.I)(),j=f.metal>=i.metal&&f.deuterium>=i.deuterium&&f.microchips>=i.microchips&&f.science>=i.science,_=!0;for(let e of y.prerequisites.structures){let r=null===(t=v.structures)||void 0===t?void 0:t.find(t=>t.type===e.type);if(!r||r.level<e.level){_=!1;break}}for(let e of y.prerequisites.technologies){let t=null===(r=v.planetResearchs)||void 0===r?void 0:r.technologies[e.id];if(!t||t.level<e.level){_=!1;break}}return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-sm text-primary/70",children:"Not Built"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Construction Costs:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[i.metal>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(f.metal<i.metal?"text-red-500":"text-secondary"),children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(i.metal)})]}),i.deuterium>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(f.deuterium<i.deuterium?"text-red-500":"text-primary"),children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(i.deuterium)})]}),i.microchips>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(f.microchips<i.microchips?"text-red-500":"text-accent"),children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(i.microchips)})]}),i.science>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(f.science<i.science?"text-red-500":"text-blue-400"),children:[(0,s.jsx)(h.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:Math.floor(i.science)})]})]})]}),(0,s.jsxs)("div",{className:"text-sm",children:["Construction Time: ",(0,b.m)(n)]}),(0,s.jsxs)("div",{className:"text-sm text-violet-400/70",children:["Energy ","energy_plant"===c.type?"Production":"Consumption",":"," ","energy_plant"===c.type?-d:d]}),!_&&(0,s.jsxs)("div",{className:"text-sm text-red-400 flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Requires: ",(()=>{let e=[...y.prerequisites.structures.filter(e=>{var t;let r=null===(t=v.structures)||void 0===t?void 0:t.find(t=>t.type===e.type);return!r||r.level<e.level}).map(e=>"".concat(C[e.type].name," Level ").concat(e.level)),...y.prerequisites.technologies.filter(e=>{var t;let r=null===(t=v.planetResearchs)||void 0===t?void 0:t.technologies[e.id];return!r||r.level<e.level}).map(e=>"".concat(w.F[e.id].name," Level ").concat(e.level))];return e.length>0?"Required: ".concat(e.join(", ")):""})()]})]}),g<1&&"energy_plant"!==c.type&&(0,s.jsxs)("div",{className:"text-sm text-amber-400",children:["Warning: Building this will result in an energy ratio of"," ",g.toFixed(2),", reducing production efficiency"]}),(0,s.jsx)(l.$,{onClick:()=>o(c.type),disabled:!j||!_,className:"w-full px-4 py-2 rounded-lg font-medium transition-colors border ".concat(j&&_?"bg-primary/20 hover:bg-primary/30 text-primary border-primary/50 hover:border-primary/80 neon-border":"bg-gray-800/50 text-gray-500 border-gray-700 cursor-not-allowed"),children:_?j?"Construct":"Not Enough Resources":"Prerequisites Not Met"})]})}function k(){let{state:e}=(0,a.I)(),[t,r]=(0,v.useState)(()=>{let e=localStorage.getItem("structuresGridCols");return e?parseInt(e):2}),i=e=>{r(e),localStorage.setItem("structuresGridCols",e.toString())};return(0,s.jsx)(f.t,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold neon-text mb-2",children:"PLANETARY STRUCTURES"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage and upgrade your planetary infrastructure"})]}),(0,s.jsxs)(N.rI,{children:[(0,s.jsx)(N.ty,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"outline",size:"icon",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(N.SQ,{align:"end",children:[(0,s.jsxs)(N._2,{onClick:()=>i(1),children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Single Column"]}),(0,s.jsxs)(N._2,{onClick:()=>i(2),children:[(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Two Columns"]}),(0,s.jsxs)(N._2,{onClick:()=>i(3),children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Three Columns"]}),(0,s.jsxs)(N._2,{onClick:()=>i(4),children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"})," Four Columns"]})]})]})]}),(0,s.jsx)("div",{className:"grid ".concat({1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"}[t]," gap-6"),children:Object.values(C).map(t=>{var r;return(0,s.jsx)(S,{info:t,existingStructure:null===(r=e.structures)||void 0===r?void 0:r.find(e=>e.type===t.type),config:e.structuresConfig.available_structures[t.type]},t.type)})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[935,149,345,440,142,728,862,318,178,441,517,358],()=>t(1458)),_N_E=e.O()}]);
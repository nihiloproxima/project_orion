(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[855],{8032:(e,s,a)=>{Promise.resolve().then(a.bind(a,2517))},2517:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>q});var t=a(5155),r=a(2115),l=a(9318),n=a(9749),i=a(3312),d=a(7364),c=a(767),o=a(9676),u=a(3551),p=a(8310),m=a(3230),h=a(4267),f=a(8435),x=a(1036),g=a(872),y=a(6165),j=a(1734),v=a(1352),b=a(2640),N=a(6352),w=a(8867),_=a(1567);let C=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(N.bL,{ref:s,className:(0,_.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,t.jsx)(N.C1,{className:(0,_.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(w.A,{className:"h-4 w-4"})})})});C.displayName=N.bL.displayName;var S=a(7528),k=a(1712),P=a(1344),A=a(3900),z=a(5932),R=a(2373),U=a(3873),E=a(5534),T=a(5565);let L=e=>"".concat("http://127.0.0.1:54321","/storage/v1/object/public/ships/").concat(e,".webp"),M={colony_ship:{name:"Colony Ship",image:L("colony_ship")},transport_ship:{name:"Transport Ship",image:L("transport_ship")},spy_probe:{name:"Spy Probe",image:L("spy_probe")},recycler_ship:{name:"Recycler Ship",image:L("recycler_ship")},cruiser:{name:"Cruiser",image:L("cruiser")}};function q(){var e,s,a;let{state:N}=(0,l.I)(),{planets:w,userPlanets:_,loading:L}=(0,R.H)(),[q,F]=(0,r.useState)([]),[O,$]=(0,r.useState)(new Set),[D,V]=(0,r.useState)(!0),[J,B]=(0,r.useState)("all"),[I,Z]=(0,r.useState)("grid"),[H,G]=(0,r.useState)(!1),[Y,W]=(0,r.useState)(null),[K,Q]=(0,r.useState)(""),[X,ee]=(0,r.useState)("speed"),[es,ea]=(0,r.useState)("desc"),[et,er]=(0,r.useState)(!1),[el,en]=(0,r.useState)(null),[ei,ed]=(0,r.useState)(null);(0,r.useEffect)(()=>{et||(en(null),ed(null))},[et]),(0,r.useEffect)(()=>{console.log("Fleet component state:",{planetsLoaded:!!w,planetCount:(null==w?void 0:w.length)||0,userPlanetsCount:_.length,selectedPlanet:N.selectedPlanet,loading:D})},[w,_,N.selectedPlanet,D]);let ec=(0,r.useCallback)(()=>{if(!el||!N.selectedPlanet||!w)return console.log("Missing required data:",{missionType:el,selectedPlanet:!!N.selectedPlanet,planetsLoaded:!!w}),[];console.log("Calculating target planets:",{missionType:el,totalPlanets:w.length});let e=w.filter(e=>{var s,a,t,r;if(e.id===(null===(s=N.selectedPlanet)||void 0===s?void 0:s.id))return!1;switch(el){case"colonize":return!e.owner_id;case"attack":return e.owner_id&&e.owner_id!==(null===(a=N.currentUser)||void 0===a?void 0:a.id);case"transport":return e.owner_id===(null===(t=N.currentUser)||void 0===t?void 0:t.id);case"spy":return e.owner_id&&e.owner_id!==(null===(r=N.currentUser)||void 0===r?void 0:r.id);case"recycle":return!0;default:return!1}}).map(e=>e.id);return console.log("Found ".concat(e.length," allowed planets for mission type ").concat(el)),e},[el,N.selectedPlanet,null===(e=N.currentUser)||void 0===e?void 0:e.id,w]),eo=(0,r.useCallback)(e=>{if(!N.selectedPlanet)return null;let s=e.coordinate_x-N.selectedPlanet.coordinate_x,a=e.coordinate_y-N.selectedPlanet.coordinate_y,t=Math.sqrt(s*s+a*a),r=Math.min(...Array.from(O).map(e=>{var s;return(null===(s=q.find(s=>s.id===e))||void 0===s?void 0:s.speed)||1/0}));return r===1/0?null:Math.ceil(t/r)},[N.selectedPlanet,O,q]);(0,r.useEffect)(()=>{(async()=>{var e;if(!(null===(e=N.selectedPlanet)||void 0===e?void 0:e.id))return;let s=k.N.from("ships").select("*").eq("current_planet_id",N.selectedPlanet.id).eq("status","stationed");"all"!==J&&(s=s.eq("type",J));let{data:a,error:t}=await s;if(t){console.error("Error fetching ships:",t);return}F([...a].sort((e,s)=>{let a="asc"===es?1:-1;return(e[X]-s[X])*a})),V(!1)})()},[null===(s=N.selectedPlanet)||void 0===s?void 0:s.id,J,X,es]);let eu=e=>{$(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},ep=async()=>{if(!Y||!K.trim())return;let{error:e}=await E.F.fleet.renameShip(Y.id,K);e||F(e=>e.map(e=>e.id===Y.id?{...e,name:K}:e)),G(!1),W(null),Q("")},em=e=>{X===e?ea("asc"===es?"desc":"asc"):(ee(e),ea("desc"))},eh=async()=>{ei&&el&&(console.log("Mission confirmed:",{ships:Array.from(O),targetPlanet:ei,missionType:el}),er(!1))},ef=(0,r.useCallback)(()=>w&&el?w.filter(e=>{var s,a;switch(el){case"transport":return e.owner_id===(null===(s=N.currentUser)||void 0===s?void 0:s.id);case"attack":case"spy":return e.owner_id&&e.owner_id!==(null===(a=N.currentUser)||void 0===a?void 0:a.id);case"colonize":return!e.owner_id;default:return!1}}).map(e=>e.id):[],[el,w,null===(a=N.currentUser)||void 0===a?void 0:a.id]);return D||L?(0,t.jsx)(U.x,{message:"LOADING FLEET DATA..."}):et?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(i.$,{variant:"ghost",onClick:()=>er(!1),className:"flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),"Back to Ship Selection"]}),(0,t.jsx)(i.$,{variant:"ghost",onClick:()=>{er(!1),ed(null),en(null)},children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Mission Type"}),(0,t.jsxs)(S.l6,{value:el||"",onValueChange:e=>{en(e)},children:[(0,t.jsx)(S.bq,{className:"w-full",children:(0,t.jsx)(S.yv,{placeholder:"Choose mission type"})}),(0,t.jsx)(S.gC,{children:(()=>{let e=new Set(Array.from(O).map(e=>{var s;return null===(s=q.find(s=>s.id===e))||void 0===s?void 0:s.type})),s=[];return e.has("cruiser")&&s.push("attack"),e.has("transport_ship")&&s.push("transport"),e.has("colony_ship")&&s.push("colonize"),e.has("spy_probe")&&s.push("spy"),e.has("recycler_ship")&&s.push("recycle"),s})().map(e=>(0,t.jsx)(S.eb,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),ei&&(0,t.jsxs)("div",{className:"p-4 bg-primary/10 rounded-lg border border-primary/20",children:[(0,t.jsxs)("h4",{className:"font-bold mb-2",children:["Selected Target: ",ei.name]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Coordinates: (",ei.coordinate_x,","," ",ei.coordinate_y,")"]}),N.selectedPlanet&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Travel Time: ",eo(ei)," hours"]}),(0,t.jsxs)(i.$,{className:"w-full mt-4",disabled:!ei||!el,onClick:eh,children:[(0,t.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Confirm Mission"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Select Target Planet"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(S.l6,{value:(null==ei?void 0:ei.id)||"",onValueChange:e=>{let s=null==w?void 0:w.find(s=>s.id===e);s&&ed(s)},children:[(0,t.jsx)(S.bq,{className:"w-full",children:(0,t.jsx)(S.yv,{placeholder:"Choose target planet"})}),(0,t.jsx)(S.gC,{children:null==w?void 0:w.filter(e=>{var s,a;switch(el){case"transport":return e.owner_id===(null===(s=N.currentUser)||void 0===s?void 0:s.id);case"attack":case"spy":return e.owner_id&&e.owner_id!==(null===(a=N.currentUser)||void 0===a?void 0:a.id);case"colonize":return!e.owner_id;default:return!1}}).map(e=>(0,t.jsxs)(S.eb,{value:e.id,children:[e.name," (",e.coordinate_x,","," ",e.coordinate_y,")"]},e.id))})]}),(0,t.jsx)("div",{className:"border rounded-lg p-4 w-full h-[calc(100vh-380px)] flex",children:(0,t.jsx)(z.r,{mode:"mission-target",onPlanetSelect:ed,allowedPlanets:ec(),highlightedPlanets:ef(),initialZoom:.3,width:"100%",height:"100%",focusedPlanet:ei})})]})]})]})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold neon-text mb-2 flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-8 w-8"}),"FLEET CONTROL"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage and deploy your stationed ships"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>Z("grid"===I?"list":"grid"),className:"flex items-center gap-2",children:"grid"===I?(0,t.jsx)(p.A,{className:"h-4 w-4"}):(0,t.jsx)(m.A,{className:"h-4 w-4"})}),(0,t.jsxs)(S.l6,{value:J,onValueChange:e=>B(e),children:[(0,t.jsxs)(S.bq,{className:"w-[180px]",children:[(0,t.jsx)(h.A,{className:"w-4 h-4 mr-2"}),(0,t.jsx)(S.yv,{placeholder:"Filter by type"})]}),(0,t.jsxs)(S.gC,{children:[(0,t.jsx)(S.eb,{value:"all",children:"All Ships"}),Object.entries(M).map(e=>{let[s,{name:a}]=e;return(0,t.jsx)(S.eb,{value:s,children:a},s)})]})]}),(0,t.jsxs)(S.l6,{value:X,onValueChange:e=>em(e),children:[(0,t.jsxs)(S.bq,{className:"w-[180px]",children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2"}),(0,t.jsx)(S.yv,{placeholder:"Sort by"})]}),(0,t.jsxs)(S.gC,{children:[(0,t.jsxs)(S.eb,{value:"speed",children:["Speed"," ","speed"===X&&("asc"===es?"↑":"↓")]}),(0,t.jsxs)(S.eb,{value:"cargo_capacity",children:["Cargo"," ","cargo_capacity"===X&&("asc"===es?"↑":"↓")]}),(0,t.jsxs)(S.eb,{value:"attack_power",children:["Attack"," ","attack_power"===X&&("asc"===es?"↑":"↓")]}),(0,t.jsxs)(S.eb,{value:"defense",children:["Defense"," ","defense"===X&&("asc"===es?"↑":"↓")]})]})]}),(0,t.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{O.size===q.length?$(new Set):$(new Set(q.map(e=>e.id)))},className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),O.size===q.length?"Deselect All":"Select All"]}),(0,t.jsx)(i.$,{variant:"default",size:"lg",disabled:0===O.size,onClick:()=>er(!0),className:"w-full px-4 py-2 rounded-lg font-medium transition-colors border ".concat(O.size?"bg-primary/20 hover:bg-primary/30 text-primary border-primary/50 hover:border-primary/80 neon-border":"bg-gray-800/50 text-gray-500 border-gray-700 cursor-not-allowed"),children:(0,t.jsx)("span",{className:"uppercase",children:"Send Mission"})})]})]}),(0,t.jsx)("div",{className:"grid"===I?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:q.map(e=>(0,t.jsxs)(n.Zp,{className:"bg-card/50 backdrop-blur-sm transition-all duration-300 ".concat(O.has(e.id)?"neon-border-primary":"hover:neon-border"),children:[(0,t.jsxs)(n.aR,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,t.jsxs)(n.ZB,{className:"flex-1 flex items-center gap-2",children:[(0,t.jsx)(C,{checked:O.has(e.id),onCheckedChange:()=>eu(e.id)}),(0,t.jsx)(T.default,{src:M[e.type].image,width:100,height:100,"aria-description":"Ship ".concat(e.name),alt:e.name,className:"w-8 h-8"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:M[e.type].name})]})]}),(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{W(e),Q(e.name),G(!0)},children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 text-blue-400"}),(0,t.jsxs)("span",{children:["Speed: ",e.speed]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-yellow-400"}),(0,t.jsxs)("span",{children:["Cargo: ",e.cargo_capacity]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-red-400"}),(0,t.jsxs)("span",{children:["Attack: ",e.attack_power]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 text-green-400"}),(0,t.jsxs)("span",{children:["Defense: ",e.defense]})]})]})})]},e.id))}),0===q.length&&(0,t.jsx)("div",{className:"text-center text-muted-foreground py-12",children:"No ships currently stationed at this planet."}),(0,t.jsx)(P.lG,{open:H,onOpenChange:G,children:(0,t.jsxs)(P.Cf,{children:[(0,t.jsx)(P.c7,{children:(0,t.jsx)(P.L3,{children:"Rename Ship"})}),(0,t.jsx)(A.p,{value:K,onChange:e=>Q(e.target.value),placeholder:"Enter new ship name"}),(0,t.jsxs)(P.Es,{children:[(0,t.jsx)(i.$,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,t.jsx)(i.$,{onClick:ep,children:"Rename"})]})]})})]})}},1344:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>u,Es:()=>m,L3:()=>h,c7:()=>p,lG:()=>d});var t=a(5155),r=a(2115),l=a(6217),n=a(767),i=a(1567);let d=l.bL;l.l9;let c=l.ZL;l.bm;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});o.displayName=l.hJ.displayName;let u=r.forwardRef((e,s)=>{let{className:a,children:r,...d}=e;return(0,t.jsxs)(c,{children:[(0,t.jsx)(o,{}),(0,t.jsxs)(l.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,t.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.UC.displayName;let p=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};p.displayName="DialogHeader";let m=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};m.displayName="DialogFooter";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=l.hE.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})}).displayName=l.VY.displayName},3900:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(5155),r=a(2115),l=a(1567);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...n})});n.displayName="Input"},7528:(e,s,a)=>{"use strict";a.d(s,{bq:()=>p,eb:()=>x,gC:()=>f,l6:()=>o,yv:()=>u});var t=a(5155),r=a(2115),l=a(3409),n=a(1719),i=a(1902),d=a(8867),c=a(1567);let o=l.bL;l.YJ;let u=l.WT,p=r.forwardRef((e,s)=>{let{className:a,children:r,...i}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=l.l9.displayName;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=l.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,t.jsx)(m,{}),(0,t.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(h,{})]})})});f.displayName=l.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=l.JU.displayName;let x=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:r})]})});x.displayName=l.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.wv.displayName},2373:(e,s,a)=>{"use strict";a.d(s,{H:()=>l});var t=a(2115),r=a(9318);function l(){var e;let{state:s}=(0,r.I)(),a=(0,t.useMemo)(()=>{var e;return(null===(e=s.planets)||void 0===e?void 0:e.filter(e=>!e.owner_id))||[]},[s.planets]),l=(0,t.useMemo)(()=>{var e;return(null===(e=s.planets)||void 0===e?void 0:e.filter(e=>{var a;return e.owner_id===(null===(a=s.currentUser)||void 0===a?void 0:a.id)}))||[]},[s.planets,null===(e=s.currentUser)||void 0===e?void 0:e.id]);return{planets:s.planets,loading:!s.loadedPlanets,unclaimedPlanets:a,userPlanets:l,getNeighboringPlanets:(e,a)=>s.planets?s.planets.filter(s=>{let t=s.coordinate_x-e.coordinate_x,r=s.coordinate_y-e.coordinate_y;return Math.sqrt(t*t+r*r)<=a&&s.id!==e.id}):[],getPlanetsByBiome:e=>{var a;return(null===(a=s.planets)||void 0===a?void 0:a.filter(s=>s.biome===e))||[]}}}},5534:(e,s,a)=>{"use strict";a.d(s,{F:()=>l});var t=a(1712);async function r(e,s,a){let r=await t.N.auth.getSession().then(e=>{let{data:{session:s}}=e;return null==s?void 0:s.access_token}),l=await fetch("".concat("http://localhost:3001/").concat(e,"/").concat(s),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});if(!l.ok)throw Error("HTTP error! status: ".concat(l.status));return l.json()}let l={admin:{updateConfig:async(e,s)=>r("admin","updateConfig",{id:e,config_data:s})},researchs:{startResearch:async(e,s)=>r("researchs","startResearch",{technology_id:e,planet_id:s})},chat:{sendMessage:async(e,s)=>r("chat","sendMessage",{channel_id:e,text:s})},users:{register:async(e,s)=>r("users","register",{id:e,name:s}),update:async(e,s)=>r("users","update",{name:e,avatar:s})},planets:{claim:async(e,s)=>r("planets","claim",{planet_id:e,homeworld:s})},structures:{construct:async(e,s)=>r("structures","construct",{planet_id:e,type:s}),upgrade:async(e,s)=>r("structures","upgrade",{planet_id:e,structure_id:s})},fleet:{buildShip:async(e,s,a)=>r("fleet","buildShip",{ship_type:e,planet_id:s,amount:a}),renameShip:async(e,s)=>r("fleet","renameShip",{ship_id:e,new_name:s})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[149,345,440,142,728,717,552,318,551,441,517,358],()=>s(8032)),_N_E=e.O()}]);